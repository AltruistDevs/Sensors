{% load crispy_forms_tags %}

<!DOCTYPE html>
<html>
	<head>
		<title>User Profile</title>
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
	</head>
	<body>
		<div class="container">
			<h1>User Profile</h1>
			<hr />

			<ul>
				{% for sensor in sensor_list %}
				<li>
					<a
						href="#"
						data-toggle="modal"
						data-target="#sensorModal{{ sensor.id }}"
						>{{ sensor.name }}</a
					>
				</li>

				<!-- Modal -->
				<div
					class="modal fade"
					id="sensorModal{{ sensor.id }}"
					tabindex="-1"
					role="dialog"
					aria-labelledby="sensorModalLabel{{ sensor.id }}"
					aria-hidden="true">
					<div
						class="modal-dialog"
						role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5
									class="modal-title"
									id="sensorModalLabel{{ sensor.id }}">
									{{ sensor.name }}
								</h5>
								<button
									type="button"
									class="close"
									data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<form
									method="post"
									id="form{{ sensor.id }}">
									{% csrf_token %}
									<input
										type="hidden"
										name="sensor_id"
										value="{{ sensor.id }}" />
									<input
										type="text"
										name="name"
										value="{{ sensor.name }}"
										class="form-control" />
									<input
										type="text"
										name="description"
										value="{{ sensor.description }}"
										class="form-control" />
									<input
										type="text"
										name="location"
										value="{{ sensor.location }}"
										class="form-control" />
									<input
										type="text"
										name="counter"
										value="{{ sensor.counter }}"
										class="form-control" />
									<input
										type="text"
										name="token"
										value="{{ sensor.token }}"
										class="form-control" />
									<button
										type="submit"
										class="btn btn-primary">
										Update Sensor
									</button>
								</form>
							</div>
						</div>
					</div>
				</div>
				{% endfor %}
			</ul>
		</div>

		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	</body>
</html>
